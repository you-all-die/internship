databaseChangeLog:
  - changeSet:
      id: 2020-09-07
      author: Sergey Lapshin
      comment: create orders
  #      preConditions:
  #        - onFail: MARK_RAN
      changes:
        - createTable:
            tableName: orders
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    primaryKeyName: pk_orders
                    nullable: false
              - column:
                  name: customer_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: product_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: product_category_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: status_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: order_line_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: address_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: customer_first_name
                  type: VARCHAR
                  constraints:
                    nullable: false
              - column:
                  name: customer_middle_name
                  type: VARCHAR
              - column:
                  name: customer_last_name
                  type: VARCHAR
                  constraints:
                    nullable: false
              - column:
                  name: customer_phone
                  type: VARCHAR
              - column:
                  name: customer_email
                  type: VARCHAR
                  constraints:
                    nullable: false
              - column:
                  name: product_name
                  type: VARCHAR
                  constraints:
                    nullable: false
              - column:
                  name: product_description
                  type: VARCHAR
              - column:
                  name: product_picture
                  type: VARCHAR
              - column:
                  name: product_price
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: product_quantity
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: address_region
                  type: VARCHAR
                  constraints:
                    nullable: false
              - column:
                  name: address_city
                  type: VARCHAR
                  constraints:
                    nullable: false
              - column:
                  name: address_district
                  type: VARCHAR
              - column:
                  name: address_street
                  type: VARCHAR
                  constraints:
                    nullable: false
              - column:
                  name: address_house
                  type: VARCHAR
                  constraints:
                    nullable: false
              - column:
                  name: address_apartment
                  type: VARCHAR
                  constraints:
                    nullable: false
              - column:
                  name: address_comment
                  type: VARCHAR
                  
#      - createTable:
#        tableName: orders_product
#        columns:
#          - column:
#            name: order_id
#            type: BIGINT
#            constraints:
#              nullable: false
#          - column:
#            name: product_id
#            type: BIGINT
#            constraints:
#              nullable: false
#      - addForeignKeyConstraint:
#          constraintName: fk_orders_product_to_order_id
#          baseTableName: order_product
#          baseColumnNames: order_id
#          referencedTableName: order
#          referencedColumnNames: id
#          onDelete: 'RESTRICT'
#          onUpdate: 'CASCADE'
#      - addForeignKeyConstraint:
#          constraintName: fk_orders_product_to_product_id
#          baseTableName: order_product
#          baseColumnNames: product_id
#          referencedTableName: product
#          referencedColumnNames: id
#          onDelete: 'CASCADE'
#          onUpdate: 'CASCADE'